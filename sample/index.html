<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Netconnections Map</title>
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <link rel="stylesheet" href="d3-map-connections.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.7/d3.min.js"></script>
    <script src="../dist/main.js"></script>
    <script>

        $.getJSON("data/geo.json", function (json) {
            d3MapConn.setOptions({
                geoJson: json,
                showPulsatingDestinationCircles: true,
                parentId: '#map-holder',
                sourceImage: 'source-pin.png',
                sourceImageHeight: 20,
                sourceImageWidth: 20,
                sourceTooltipdata: 'ip',
                destinationImage: 'pointer.png',
                destinationImageWidth: 15,
                destinationImageHeight: 15,
                destinationTooltipdata: 'ip',
                showCountriesOnHover: true,
                addAnimationToPath: true,
                animationDuration: 5000,
                pulsatingDestinationCirclesColor: '#fd0017',
                pathColor: '#fb5757',
            });
            d3MapConn.createMap().then((result) => {
                $.getJSON("data/data.json", function (json) {
                    let count = 0;
                    let interval = setInterval(() => {
                        d3MapConn.createConnections([json[count]]);
                        count++;
                        if (count == json.length) {
                            clearInterval(interval);
                        }
                    }, 300);
                });
            });
        });
    </script>
</head>

<body>
    <div id="map-holder"></div>
</body>

</html>